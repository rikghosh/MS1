<!DOCTYPE html>
<html>
    <head>
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="https://d3plus.org/js/d3plus-text.v0.9.full.min.js"></script>
        <link href="https://fonts.googleapis.com/css?family='Open Sans'" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300" rel="stylesheet">
        <style>
            html {
              background-color: #EEE;
              font-family: 'Open Sans';
                
            }
            .tooltip div {
                margin: 20% 5%;
            }
            .tooltip {
              background: rgba(238, 238, 238, 0.8);
              font-family: 'Open Sans';
              color: #000;
              display: none;
              font-size: 90px;
              position: absolute;
              text-align: center;
              top: 0;
              height: 100%;
              width: 100%;
              z-index: 10;
            }
            
            .tooltip2 {
              background: rgba(0, 0, 0, 0);
              font-family: 'Open Sans';
              color: #000;
              display: none;
              font-size: 14px;
              padding: 10px;
              position: absolute;
              text-align: center;
              z-index: 11;
            }
            
            .title1 {
                font-size: 25px;
                position: relative;
                margin-left: 50px;
                top: 20px;
                margin-bottom: 25px;
                text-align: left;
                float: left;
                
            }
            .title2 {
                font-size: 25px;
                position: relative;
                margin-left: 10px;
                top: 20px;
                margin-bottom: 25px;
                text-align: left;
                float: left;
                
            }
            .description {
                font-size: 20px;
                position: relative;
                bottom: 40px;
                color: #BEBEBE;
            }
            
            .description a {
                color: #BEBEBE;
            }
            
            select {
              -webkit-appearance: none;
              -moz-appearance: none;
              background-color: rgba(0,0,0,0);
              background-position: center right;
              background-repeat: no-repeat;
              color: olive;
              font-size: 50px;
              font-family: 'Open Sans';
              overflow: hidden;
              border: 0;
              margin-left: 50px;
              padding-top: 2px;
              padding-bottom: 2px;
              text-overflow: ellipsis;
              white-space: nowrap;
            }
            
            select::-ms-expand {
              display: none;
            }
            
            
            
        </style>
    </head>

    <body>
        <div class='title1'>SHIFTS IN EDUCATION, HEALTH, AND INCOME INEQUALITIES: A COMPARISON BETWEEN 2010 AND 2014 FOR</div>
        <div class='title2'></div>
        <div class='selectcontainer'></div>
        <div class='d3container'></div>
        <!-- <div class='description'>Confused? See <a href="https://github.com/rikghosh/ms-1/blob/master/interactivity/README.md">README</a>.</div> -->
        
        <script>
            d3.select('.d3container')
                .append('svg')
                .attr('width', window.innerWidth)
                .attr('height', (window.innerHeight - 200));
            
            var clickIter = 0; 
            
            var svg = d3.select('svg');
            
            var ssa = [" Sub-Saharan Africa", " Angola", " Benin", " Botswana", " Burkina Faso", " Burundi", " Cabo Verde", " Cameroon", " Central African Republic", " Chad", " Comoros", " Congo", " Democratic Republic of the Congo", " Cote d'Ivoire", " Equatorial Guinea", " Eritrea", " Ethiopia", " Gabon", " Gambia", " Ghana", " Guinea", " Guinea-Bissau", " Kenya", " Lesotho", " Liberia", " Madagascar", " Malawi", " Mali", " Mauritania", " Mauritius", " Mozambique", " Niger", " Nigeria", " Rwanda", " Sao Tome and Principe", " Senegal", " Seychelles", " Sierra Leone", " South Africa", " South Sudan", " Swaziland", " United Republic of Tanzania", " Togo", " Uganda", " Zambia", " Zimbabwe"];
            
            console.log(ssa.length)
            
            var tooltip = d3.select('.d3container')           
              .append('div')                            
              .attr('class', 'tooltip')     
              .on('click', function() {
                  tooltip.style('display', 'none');
              });
            
            tooltip.append('div')                       
              .attr('class', 'sentence');                  
              
              
            var tooltip2 = d3.select('.d3container')
                .append('div')
                .attr('class', 'tooltip2')
                .on('click', function() {
                    tooltip.style('display', 'none');
                });
            
            tooltip2.append('div')
                    .attr('class', 'info');
                    
            
            var select = d3.select('.selectcontainer')
              .append('select')
              	.attr('class','select')
                .on('change', onchange)
            
            var options = select
              .selectAll('option')
            	.data(ssa)
            	.enter()
            	.append('option')
            		.text(function (d) { return d; });
            
            function onchange() {
            	selectValue = d3.select('select').property('value')
                d3.selectAll('circle')
                    .style('stroke-width', '0');
                d3.selectAll('#connection')
                    .style('stroke-width', '1')
                    .style('stroke', 'gray');
                d3.selectAll('.label')
                    .attr('font-size', '0px');
                d3.select('#curCount').remove()
                // d3.select('#countryname').style('display', 'inline')
                                
                d3.selectAll('.' + selectValue.replace(/\s+/g, '').replace(/'/g, ''))
                    .style('stroke', 'black')
                    .style('stroke-width', '2.5');
                d3.selectAll('#' + selectValue.replace(/\s+/g, '').replace(/'/g, ''))
                    .attr('font-size', '14px');
                console.log(selectValue.replace(/\s+/g, '').replace(/'/g, ''))

            };

            
            d3.csv('education.csv', function(error1, educationData) {
                if (error1) throw error1;
                d3.csv('health.csv', function(error2, healthData) {
                    if (error2) throw error2;
                    d3.csv('income.csv', function(error3, incomeData) {
                        if (error3) throw error3;
                        educationData = educationData.filter(function(d) { return ssa.indexOf(d.Country) > -1 && d['2010'] != "" && d['2014'] != "" });
                        healthData = healthData.filter(function(d) {return ssa.indexOf(d.Country) > -1 && d['2010'] != "" && d['2014'] != "" });
                        incomeData = incomeData.filter(function(d) {return ssa.indexOf(d.Country) > -1 && d['2010'] != "" && d['2014'] != "" });
                        
                        // educationData = educationData.forEach(function(d) { })

                        console.log(educationData);
                        console.log(healthData);
                        console.log(incomeData);
                        
                        // create horizontal scale
                        var x = d3.scaleLinear()
                            .domain([6, 60]) // possible range of values
                            .range([350, window.innerWidth-200]);
                            
                        svg.append('text')
                            .text('EDUCATION')
                            .attr('x', 50)
                            .attr('y', (window.innerHeight - 200)/6)
                            .attr('font-size', '20px')
                            .attr('font-family', 'Open Sans')
                            .on('mouseover', function() {
                                // decreasing.attr('display', 'none');
                                eduExp.attr('display', 'inline');
                            })
                            .on('mouseout', function() {
                                // decreasing.attr('display', 'inline');
                                eduExp.attr('display', 'none');
                            })
                            
                        var eduExp = svg.append('text')
                            .text('THE ATKINSON INEQUALITY INDEX DETERMINED FOR EACH COUNTRY BY ITS DISTRIBUTION OF YEARS OF SCHOOLING')
                            .attr('x', x(30))
                            .attr('y', 2*(window.innerHeight - 200)/6 - 2.5)
                            .attr('font-size', '14px')
                            .attr('font-family', 'Open Sans')
                            .attr('text-anchor', 'middle')
                            .attr('display', 'none')
                            
                        svg.append('text')
                            .text('HEALTH')
                            .attr('x', 50)
                            .attr('y', (window.innerHeight - 200)/2)
                            .attr('font-size', '20px')
                            .attr('font-family', 'Open Sans')
                            .on('mouseover', function() {
                                // decreasing.attr('display', 'none');
                                healthExp.attr('display', 'inline');
                            })
                            .on('mouseout', function() {
                                // decreasing.attr('display', 'inline');
                                healthExp.attr('display', 'none');
                            })
                            
                        var healthExp = svg.append('text')
                            .text('THE ATKINSON INEQUALITY INDEX DETERMINED FOR EACH COUNTRY BY ITS DISTRIBUTION OF EXPECTED LENGTH OF LIFE')
                            .attr('x', x(30))
                            .attr('y', 2*(window.innerHeight - 200)/6 - 2.5)
                            .attr('font-size', '14px')
                            .attr('font-family', 'Open Sans')
                            .attr('text-anchor', 'middle')
                            .attr('display', 'none')
                            
                        svg.append('text')
                            .text('INCOME')
                            .attr('x', 50)
                            .attr('y', 5*(window.innerHeight - 200)/6)
                            .attr('font-size', '20px')
                            .attr('font-family', 'Open Sans')
                            .on('mouseover', function() {
                                // decreasing.attr('display', 'none');
                                incExp.attr('display', 'inline');
                            })
                            .on('mouseout', function() {
                                // decreasing.attr('display', 'inline');
                                incExp.attr('display', 'none');
                            })
                        
                        var incExp = svg.append('text')
                            .text('THE ATKINSON INEQUALITY INDEX DETERMINED FOR EACH COUNTRY BY ITS DISTRIBUTION OF INCOME')
                            .attr('x', x(30))
                            .attr('y', 2*(window.innerHeight - 200)/6 - 2.5)
                            .attr('font-size', '14px')
                            .attr('font-family', 'Open Sans')
                            .attr('text-anchor', 'middle')
                            .attr('display', 'none')
                        
                        for (var i=1; i<7; i+=2) { 
                        svg.append('text')
                            .text('6.0 %')
                            .attr('x', x(6) - 50)
                            .attr('y', i*(window.innerHeight - 200)/6 - 50)
                            .attr('font-size', '14px')
                            .attr('font-family', 'Open Sans');
                            
                        svg.append('text')
                            .text('60.0 %')
                            .attr('x', x(60) + 12)
                            .attr('y', i*(window.innerHeight - 200)/6 - 50)
                            .attr('font-size', '14px')
                            .attr('font-family', 'Open Sans');
                            
                        svg.append('text')
                            .text('6.0 %')
                            .attr('x', x(6) - 50)
                            .attr('y', i*(window.innerHeight - 200)/6 + 44)
                            .attr('font-size', '15px')
                            .attr('font-family', 'Open Sans');
                            
                        svg.append('text')
                            .text('60.0 %')
                            .attr('x', x(60) + 12)
                            .attr('y', i*(window.innerHeight - 200)/6 + 44)
                            .attr('font-size', '15px')
                            .attr('font-family', 'Open Sans');  
                        
                        }
                        
                        
                        //  svg.append('polyline')
                        //      .attr('points', x(25) + ',' + 2*(window.innerHeight - 200)/6 - 2.5 + ' ' + x(25) - 8 + ',' + 2*(window.innerHeight - 200)/6 - 2.5 + 8 + ' ' + x(25) + ',' + 2*(window.innerHeight - 200)/6 - 2.5 - 16 + ' ' + x(25) + ',' + 2*(window.innerHeight - 200)/6 - 2.5)
                        //      .attr('fill', 'olive');
                            
                        
                        var decreasing = svg.append('text')
                            .text('DECREASING INEQUALITY')
                            .attr('x', x(6) - 50)
                            .attr('y', 6*(window.innerHeight - 200)/6 - 2.5 - 5)
                            .attr('font-size', '16px')
                            .attr('font-family', 'Open Sans')
                            .attr('text-anchor', 'start')
                            .attr('fill', 'olive');
                        
                        var increasing = svg.append('text')
                            .text('INCREASING INEQUALITY')
                            .attr('x', x(60) + 55)
                            .attr('y', 6*(window.innerHeight - 200)/6 - 2.5 - 5)
                            .attr('font-size', '16px')
                            .attr('font-family', 'Open Sans')
                            .attr('text-anchor', 'end')
                            .attr('fill', '#B6202D')
                            
                        for (var i=1; i<7; i+=2) {    
                            svg.append('text')
                                .text('2010')
                                .attr('x', 215)
                                .attr('y', i*(window.innerHeight - 200)/6 - 50)
                                .attr('font-size', '14px')
                                .attr('font-family', 'Open Sans');
                                
                            svg.append('text')
                                .text('2014')
                                .attr('x', 215)
                                .attr('y', i*(window.innerHeight - 200)/6 + 44)
                                .attr('font-size', '14px')
                                .attr('font-family', 'Open Sans');
                        }
                        
                        
                        svg.selectAll('point1a')
                            .data(educationData)
                            .enter()
                            .append('circle')
                            .attr('class', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('cx', function(d, i) { return x(d["2010"]) })
                            .attr('cy', (window.innerHeight - 200)/6 - 57)
                            .attr('r', 5)
                            .attr('fill', function(d) {
                                if(parseInt(d["2010"]) < parseInt(d["2014"])) 
                                    return '#B6202D';
                                else
                                    return 'olive';
                            })
                            .attr('opacity', '0.5')
                        
                        svg.selectAll('label1a')
                            .data(educationData)
                            .enter()
                            .append('text')
                            .text(function(d) { return d.Country + ', ' + d["2010"] })
                            .attr('class', 'label')
                            .attr('id', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('x', function(d) { return x(d["2010"]) })
                            .attr('y', (window.innerHeight - 200)/6 - 72)
                            .attr('font-size', '0.1px')
                            .attr('font-family', 'Open Sans');
                            
                        svg.selectAll('selector1a')
                            .data(educationData)
                            .enter()
                            .append('ellipse')
                            .attr('id', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('cx', function(d, i) { return x(d["2010"]) })
                            .attr('cy', (window.innerHeight - 200)/6 - 57)
                            .attr('rx', 5)
                            .attr('ry', 20)
                            .attr('opacity', '0')
                            .on('mouseover', function(d) {
                                d3.selectAll('.' + d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, ''))
                                    .style('stroke-width', '2.5')
                                    .style('stroke', 'black')
                                    // .selectAll('#connection')
                                    //     .attr('stroke', function(d) {
                                    //         if (d["2010"] > d["2014"]) {
                                    //             return 'olive';
                                    //         }
                                    //         else {
                                    //             return 'maroon'
                                    //         }
                                    //         })
                                d3.selectAll('#' + d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, ''))
                                    .attr('font-size', '14px');
                                d3.select('#countryname').style('display', 'none')
                                d3.select('select').property('value', d.Country.slice(1))
                                if(parseInt(d["2010"]) < parseInt(d["2014"])) 
                                    d3.select('select').style('color', '#B6202D');
                                else
                                    d3.select('select').style('color', 'olive');
                                
                            })
                            .on('mouseout', function(d) {
                                d3.selectAll('circle')
                                    .style('stroke-width', '0');
                                d3.selectAll('#connection')
                                    .style('stroke-width', '1')
                                    .style('stroke', 'gray');
                                d3.selectAll('.label')
                                    .attr('font-size', '0px')
                                d3.select('select').property('value', 'Sub-Saharan Africa')
                                d3.select('select').style('color', 'olive');
                            })
                            .on('click', function(d) {
                                d3.select(this)
                                tooltip.select('.sentence').html(d.Country + ' went from an education inequality of  ' + d['2010'] + ' in 2010 to   ' + d['2014'] + ' in 2014.');
                                tooltip.style('display', 'block');
                                if(parseInt(d["2010"]) < parseInt(d["2014"])) 
                                    tooltip.style('color', '#B6202D')
                                else
                                    tooltip.style('color', 'olive')
                            });
                                    
                        svg.selectAll('point1b')
                            .data(educationData)
                            .enter()
                            .append('circle')
                            .attr('class', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('cx', function(d, i) { return x(d["2014"]) })
                            .attr('cy', (window.innerHeight - 200)/6 + 37)
                            .attr('r', 5)
                            .attr('fill', function(d) {
                                if(parseInt(d["2010"]) < parseInt(d["2014"])) 
                                    return '#B6202D';
                                if(d.Country == " Ghana" || d.Country == " Gabon") {
                                    return '#B6202D';
                                }
                                else
                                    return 'olive';
                            })
                            .attr('opacity', '0.5')
                            
                            
                        svg.selectAll('label1b')
                            .data(educationData)
                            .enter()
                            .append('text')
                            .text(function(d) { return d.Country + ', ' + d["2014"] })
                            .attr('class', 'label')
                            .attr('id', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('x', function(d) { return x(d["2014"]) })
                            .attr('y', (window.innerHeight - 200)/6 + 60)
                            .attr('font-size', '0.1px')
                            .attr('font-family', 'Open Sans');
                            
                        svg.selectAll('selector1b')
                            .data(educationData)
                            .enter()
                            .append('ellipse')
                            .attr('class', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('cx', function(d, i) { return x(d["2014"]) })
                            .attr('cy', (window.innerHeight - 200)/6 + 37)
                            .attr('rx', 5)
                            .attr('ry', 20)
                            .attr('opacity', '0')
                            .on('mouseover', function(d) {
                                d3.selectAll('#' + d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, ''))
                                    .attr('font-size', '14px');
                                d3.selectAll('.' + d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, ''))
                                    .style('stroke-width', '2.5')
                                    .style('stroke', 'black');
                                d3.select('select').property('value', d.Country.slice(1))
                                if(parseInt(d["2010"]) < parseInt(d["2014"])) 
                                    d3.select('select').style('color', '#B6202D');
                                else
                                    d3.select('select').style('color', 'olive');
                            })
                            .on('mouseout', function(d) {
                                d3.selectAll('.label')
                                    .attr('font-size', '0px');
                                d3.selectAll('circle')
                                    .style('stroke-width', '0');
                                d3.selectAll('#connection')
                                    .style('stroke-width', '1')
                                    .style('stroke', 'gray');
                                d3.select('select').property('value', 'Sub-Saharan Africa')
                                d3.select('select').style('color', 'olive');
                            })
                            .on('click', function(d) {
                                d3.select(this)
                                tooltip.select('.sentence').html(d.Country + ' went from an education inequality of  ' + d['2010'] + ' in 2010 to   ' + d['2014'] + ' in 2014.');
                                tooltip.style('display', 'block');
                                if(parseInt(d["2010"]) < parseInt(d["2014"])) 
                                    tooltip.style('color', '#B6202D')
                                else
                                    tooltip.style('color', 'olive')
                            });
                        
                        svg.selectAll('connection1')
                            .data(educationData)
                            .enter()
                            .append('line')
                            .attr('id', 'connection')
                            .attr('class', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('x1', function(d, i) { return x(d["2010"]) })
                            .attr('y1', (window.innerHeight - 200)/6 - 57)
                            .attr('x2', function(d, i) { return x(d["2014"]) })
                            .attr('y2', (window.innerHeight - 200)/6 + 37)
                            .attr('stroke-width', 1)
                            .attr('stroke', 'gray')
                            .attr('opacity', '0.75')
                            .style('stroke-dasharray', ('3', '3'));
                            
                            
                            
                        svg.selectAll('point2a')
                            .data(healthData)
                            .enter()
                            .append('circle')
                            .attr('class', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('cx', function(d, i) { return x(d["2010"]) })
                            .attr('cy', (window.innerHeight - 200)/2 - 57)
                            .attr('r', 5)
                            .attr('fill', function(d) {
                                if(parseInt(d["2010"]) < parseInt(d["2014"])) 
                                    return '#B6202D';
                                else
                                    return 'olive';
                            })
                            .attr('opacity', '0.5')
                            
                        svg.selectAll('label2a')
                            .data(healthData)
                            .enter()
                            .append('text')
                            .text(function(d) { return d.Country + ', ' + d["2010"] })
                            .attr('class', 'label')
                            .attr('id', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('x', function(d) { return x(d["2010"]) })
                            .attr('y', (window.innerHeight - 200)/2 - 72)
                            .attr('font-size', '0.1px')
                            .attr('font-family', 'Open Sans');
                            
                        svg.selectAll('selector2a')
                            .data(healthData)
                            .enter()
                            .append('ellipse')
                            .attr('class', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('cx', function(d, i) { return x(d["2010"]) })
                            .attr('cy', (window.innerHeight - 200)/2 - 57)
                            .attr('rx', 5)
                            .attr('ry', 20)
                            .attr('opacity', '0')
                            .on('mouseover', function(d) {
                                d3.selectAll('#' + d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, ''))
                                    .attr('font-size', '14px');
                                d3.selectAll('.' + d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, ''))
                                    .style('stroke-width', '2.5')
                                    .style('stroke', 'black');
                                d3.select('select').property('value', d.Country.slice(1))
                                if(parseInt(d["2010"]) < parseInt(d["2014"])) 
                                    d3.select('select').style('color', '#B6202D');
                                else
                                    d3.select('select').style('color', 'olive');
                            })
                            .on('mouseout', function(d) {
                                d3.selectAll('.label')
                                    .attr('font-size', '0px');
                                d3.selectAll('circle')
                                    .style('stroke-width', '0');
                                d3.selectAll('#connection')
                                    .style('stroke-width', '1')
                                    .style('stroke', 'gray');
                                d3.select('select').property('value', 'Sub-Saharan Africa')
                                d3.select('select').style('color', 'olive');
                            })
                            .on('click', function(d) {
                                tooltip.select('.sentence').html(d.Country + ' went from a health inequality of  ' + d['2010'] + ' in 2010 to   ' + d['2014'] + ' in 2014.');
                                tooltip.style('display', 'block');
                                if(parseInt(d["2010"]) < parseInt(d["2014"])) 
                                    tooltip.style('color', '#B6202D')
                                else
                                    tooltip.style('color', 'olive')
                            });
                                    
                                    
                        svg.selectAll('point2b')
                            .data(healthData)
                            .enter()
                            .append('circle')
                            .attr('class', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('cx', function(d, i) { return x(d["2014"]) })
                            .attr('cy', (window.innerHeight - 200)/2 + 37)
                            .attr('r', 5)
                            .attr('fill', function(d) {
                                if(parseInt(d["2010"]) < parseInt(d["2014"])) 
                                    return '#B6202D';
                                else
                                    return 'olive';
                            })
                            .attr('opacity', '0.5')
                            
                        svg.selectAll('label2b')
                            .data(healthData)
                            .enter()
                            .append('text')
                            .text(function(d) { return d.Country + ', ' + d["2014"] })
                            .attr('class', 'label')
                            .attr('id', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('x', function(d) { return x(d["2014"]) })
                            .attr('y', (window.innerHeight - 200)/2 + 60)
                            .attr('font-size', '0.1px')
                            .attr('font-family', 'Open Sans');
                            
                        svg.selectAll('selector2b')
                            .data(healthData)
                            .enter()
                            .append('ellipse')
                            .attr('class', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('cx', function(d, i) { return x(d["2014"]) })
                            .attr('cy', (window.innerHeight - 200)/2 + 37)
                            .attr('rx', 5)
                            .attr('ry', 20)
                            .attr('opacity', '0')
                            .on('mouseover', function(d) {
                                d3.selectAll('#' + d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, ''))
                                    .attr('font-size', '14px');
                                d3.selectAll('.' + d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, ''))
                                    .style('stroke-width', '2.5')
                                    .style('stroke', 'black');
                                d3.select('select').property('value', d.Country.slice(1))
                                if(parseInt(d["2010"]) < parseInt(d["2014"])) 
                                    d3.select('select').style('color', '#B6202D');
                                else
                                    d3.select('select').style('color', 'olive');
                            })
                            .on('mouseout', function(d) {
                                d3.selectAll('.label')
                                    .attr('font-size', '0px');
                                d3.selectAll('circle')
                                    .style('stroke-width', '0');
                                d3.selectAll('#connection')
                                    .style('stroke-width', '1')
                                    .style('stroke', 'gray');
                                d3.select('select').property('value', 'Sub-Saharan Africa')
                                d3.select('select').style('color', 'olive');
                            })
                            .on('click', function(d) {
                                d3.select(this)
                                    .style('fill', 'white');
                                tooltip.select('.sentence').html(d.Country + ' went from a health inequality of  ' + d['2010'] + ' in 2010 to   ' + d['2014'] + ' in 2014.');
                                tooltip.style('display', 'block');
                                if(parseInt(d["2010"]) < parseInt(d["2014"])) 
                                    tooltip.style('color', '#B6202D')
                                else
                                    tooltip.style('color', 'olive')
                            });
                        
                        svg.selectAll('connection2')
                            .data(healthData)
                            .enter()
                            .append('line')
                            .attr('id', 'connection')
                            .attr('class', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('x1', function(d, i) { return x(d["2010"]) })
                            .attr('y1', (window.innerHeight - 200)/2 - 57)
                            .attr('x2', function(d, i) { return x(d["2014"]) })
                            .attr('y2', (window.innerHeight - 200)/2 + 37)
                            .attr('stroke-width', 1)
                            .attr('stroke', 'gray')
                            .attr('opacity', '0.75')
                            .style('stroke-dasharray', ('3', '3'));
                            
                            
                            
                        svg.selectAll('point3a')
                            .data(incomeData)
                            .enter()
                            .append('circle')
                            .attr('class', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('cx', function(d, i) { return x(d["2010"]) })
                            .attr('cy', 5*(window.innerHeight - 200)/6 - 57)
                            .attr('r', 5)
                            .attr('fill', function(d) {
                                if(parseInt(d["2010"]) < parseInt(d["2014"])) 
                                    return '#B6202D';
                                else
                                    return 'olive';
                            })
                            .attr('opacity', '0.5')
                            
                        svg.selectAll('label3a')
                            .data(incomeData)
                            .enter()
                            .append('text')
                            .text(function(d) { return d.Country + ', ' + d["2010"] })
                            .attr('class', 'label')
                            .attr('id', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('x', function(d) { return x(d["2010"]) })
                            .attr('y', 5*(window.innerHeight - 200)/6 - 72)
                            .attr('font-size', '0.1px')
                            .attr('font-family', 'Open Sans');
                            
                        svg.selectAll('selector3a')
                            .data(incomeData)
                            .enter()
                            .append('ellipse')
                            .attr('class', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('cx', function(d, i) { return x(d["2010"]) })
                            .attr('cy', 5*(window.innerHeight - 200)/6 - 57)
                            .attr('rx', 5)
                            .attr('ry', 20)
                            .attr('opacity', '0')
                            .on('mouseover', function(d) {
                                d3.selectAll('#' + d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, ''))
                                    .attr('font-size', '14px'); 
                                d3.selectAll('.' + d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, ''))
                                    .style('stroke-width', '2.5')
                                    .style('stroke', 'black');
                                d3.select('select').property('value', d.Country.slice(1))
                                if(parseInt(d["2010"]) < parseInt(d["2014"])) 
                                    d3.select('select').style('color', '#B6202D');
                                else
                                    d3.select('select').style('color', 'olive');
                            })
                            .on('mouseout', function(d) {
                                d3.selectAll('.label')
                                    .attr('font-size', '0px');
                                d3.selectAll('circle')
                                    .style('stroke-width', '0');
                                d3.selectAll('#connection')
                                    .style('stroke-width', '1')
                                    .style('stroke', 'gray');
                                d3.select('select').property('value', 'Sub-Saharan Africa')
                                d3.select('select').style('color', 'olive');
                            })
                            .on('click', function(d) {
                                d3.select(this)
                                    .style('fill', 'white');
                                tooltip.select('.sentence').html(d.Country + ' went from an income inequality of  ' + d['2010'] + ' in 2010 to   ' + d['2014'] + ' in 2014.');
                                tooltip.style('display', 'block');
                                if(parseInt(d["2010"]) < parseInt(d["2014"])) 
                                    tooltip.style('color', '#B6202D')
                                else
                                    tooltip.style('color', 'olive')
                            });
                            
                            
                        svg.selectAll('point3b')
                            .data(incomeData)
                            .enter()
                            .append('circle')
                            .attr('class', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('cx', function(d, i) { return x(d["2014"]) })
                            .attr('cy', 5*(window.innerHeight - 200)/6 + 37)
                            .attr('r', 5)
                            .attr('fill', function(d) {
                                if(parseInt(d["2010"]) < parseInt(d["2014"])) 
                                    return '#B6202D';
                                else
                                    return 'olive';
                            })
                            .attr('opacity', '0.5')
                            
                        svg.selectAll('label3b')
                            .data(incomeData)
                            .enter()
                            .append('text')
                            .text(function(d) { return d.Country + ', ' + d["2014"] })
                            .attr('class', 'label')
                            .attr('id', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('x', function(d) { return x(d["2014"]) })
                            .attr('y', 5*(window.innerHeight - 200)/6 + 60)
                            .attr('font-size', '0.1px')
                            .attr('font-family', 'Open Sans');
                                    
                        svg.selectAll('selector3b')
                            .data(incomeData)
                            .enter()
                            .append('ellipse')
                            .attr('class', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('cx', function(d, i) { return x(d["2014"]) })
                            .attr('cy', 5*(window.innerHeight - 200)/6 + 37)
                            .attr('rx', 5)
                            .attr('ry', 20)
                            .attr('opacity', '0')
                            .on('mouseover', function(d) {
                                d3.selectAll('#' + d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, ''))
                                    .attr('font-size', '14px');  
                                d3.selectAll('.' + d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, ''))
                                    .style('stroke-width', '2.5')
                                    .style('stroke', 'black');
                                d3.select('select').property('value', d.Country.slice(1))
                                if(parseInt(d["2010"]) < parseInt(d["2014"])) 
                                    d3.select('select').style('color', '#B6202D');
                                else
                                    d3.select('select').style('color', 'olive');
                            })
                            .on('mouseout', function(d) {
                                d3.selectAll('.label')
                                    .attr('font-size', '0px');
                                d3.selectAll('circle')
                                    .style('stroke-width', '0');
                                d3.selectAll('#connection')
                                    .style('stroke-width', '1')
                                    .style('stroke', 'gray');
                                d3.select('select').property('value', 'Sub-Saharan Africa')
                                d3.select('select').style('color', 'olive');
                            })
                            .on('click', function(d) {
                                d3.select(this)
                                    .style('fill', 'white');
                                tooltip.select('.sentence').html(d.Country + ' went from an income inequality of  ' + d['2010'] + ' in 2010 to   ' + d['2014'] + ' in 2014.');
                                tooltip.style('display', 'block');
                                if(parseInt(d["2010"]) < parseInt(d["2014"])) 
                                    tooltip.style('color', '#B6202D')
                                else
                                    tooltip.style('color', 'olive')
                            });
                        


                        svg.selectAll('connection3')
                            .data(incomeData)
                            .enter()
                            .append('line')
                            .attr('id', 'connection')
                            .attr('class', function(d,i) { return d.Country.slice(1).replace(/\s+/g, '').replace(/'/g, '') })
                            .attr('x1', function(d, i) { return x(d["2010"]) })
                            .attr('y1', 5*(window.innerHeight - 200)/6 - 57)
                            .attr('x2', function(d, i) { return x(d["2014"]) })
                            .attr('y2', 5*(window.innerHeight - 200)/6 + 37)
                            .attr('stroke-width', 1)
                            .attr('stroke', 'gray')
                            .attr('opacity', '0.75')
                            .style('stroke-dasharray', ('3', '3'));
                            

                        for (var i=1; i<7; i+=2) {
                            svg.append('line')
                                .attr('x1', x(6))
                                .attr('x2', x(60))
                                .attr('y1', i*(window.innerHeight - 200)/6 - 57)
                                .attr('y2', i*(window.innerHeight - 200)/6 - 57)
                                .attr('stroke-width', 1)
                                .attr('stroke', 'gray')
                                .attr('opacity', '0.5');
                                
                            svg.append('line')
                                .attr('x1', x(6))
                                .attr('x2', x(60))
                                .attr('y1', i*(window.innerHeight - 200)/6 + 37)
                                .attr('y2', i*(window.innerHeight - 200)/6 + 37)
                                .attr('stroke-width', 1)
                                .attr('stroke', 'gray')
                                .attr('opacity', '0.5');
                        }
                            
                        
                    })
                })
            });
            

        </script>
    </body>
</html>